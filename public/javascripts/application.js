/* Riot v2.0.15, @license MIT, (c) 2015 Muut Inc. + contributors */
!function(t){function e(t){var e={val:t},n=t.split(/\s+in\s+/);return n[1]&&(e.val=A(0)+n[1],n=n[0].slice(A(0).length).trim().split(/,\s*/),e.key=n[0],e.pos=n[1]),e}function n(t,e,n){var i={};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function i(t,i,r){function o(t,e,n){p.splice(t,0,e),h.splice(t,0,n)}l(t,"each");var a,c=t.outerHTML,s=t.previousSibling,d=t.parentNode,p=[],h=[];r=e(r),i.one("update",function(){d.removeChild(t)}).one("premount",function(){d.stub&&(d=i.root)}).on("update",function(){var t=C(r.val,i);if(t){if(!Array.isArray(t)){var e=JSON.stringify(t);if(e==a)return;a=e,f(h,function(t){t.unmount()}),p=[],h=[],t=Object.keys(t).map(function(e){return n(r,e,t[e])})}f(p,function(e){if(e instanceof Object){if(t.indexOf(e)>-1)return}else{var n=y(t,e),i=y(p,e);if(n.length>=i.length)return}var r=p.indexOf(e),o=h[r];return o?(o.unmount(),p.splice(r,1),h.splice(r,1),!1):void 0});var l=[].indexOf.call(d.childNodes,s)+1;f(t,function(e,s){var f=t.indexOf(e,s),g=p.indexOf(e,s);if(0>f&&(f=t.lastIndexOf(e,s)),0>g&&(g=p.lastIndexOf(e,s)),!(e instanceof Object)){var v=y(t,e),m=y(p,e);v.length>m.length&&(g=-1)}var b=d.childNodes;if(0>g){if(!a&&r.key)var T=n(r,e,f);var x=new u({tmpl:c},{before:b[l+f],parent:i,root:d,item:T||e});return x.mount(),o(f,e,x),!0}return r.pos&&h[g][r.pos]!=f&&(h[g].one("update",function(t){t[r.pos]=f}),h[g].update()),f!=g?(d.insertBefore(b[l+g],b[l+(f>g?f+1:f)]),o(f,p.splice(g,1)[0],h.splice(g,1)[0])):void 0}),p=t.slice()}})}function r(t,e,n){v(t,function(t){if(1==t.nodeType){t.parentNode&&t.parentNode.isLoop&&(t.isLoop=1),t.getAttribute("each")&&(t.isLoop=1);var i=x(t);if(i&&!t.isLoop){for(var r,o=new u(i,{root:t,parent:e},t.innerHTML),a=i.name,c=e;!x(c.root)&&c.parent;)c=c.parent;o.parent=c,r=c.tags[a],r?(Array.isArray(r)||(c.tags[a]=[r]),c.tags[a].push(o)):c.tags[a]=o,t.innerHTML="",n.push(o)}f(t.attributes,function(n){/^(name|id)$/.test(n.name)&&(e[n.value]=t)})}})}function o(t,e,n){function r(t,e,i){if(e.indexOf(A(0))>=0){var r={dom:t,expr:e};n.push(d(r,i))}}v(t,function(t){var n=t.nodeType;if(3==n&&"STYLE"!=t.parentNode.tagName&&r(t,t.nodeValue),1==n){var o=t.getAttribute("each");return o?(i(t,e,o),!1):(f(t.attributes,function(e){var n=e.name,i=n.split("__")[1];return r(t,e.value,{attr:i||n,bool:i}),i?(l(t,n),!1):void 0}),x(t)?!1:void 0)}})}function u(t,e,n){function i(){f(Object.keys(_),function(t){l[t]=C(_[t],h||c)})}function u(t){if(f(b,function(e){e[t?"mount":"unmount"]()}),h){var e=t?"on":"off";h[e]("update",c.update)[e]("unmount",c.unmount)}}var a,c=k.observable(this),l=T(e.opts)||{},p=g(t.tmpl),h=e.parent,v=[],b=[],y=e.root,x=e.item,w=t.fn,L=y.tagName.toLowerCase(),_={};w&&y._tag&&y._tag.unmount(!0),y._tag=this,this._id=~~((new Date).getTime()*Math.random()),d(this,{parent:h,root:y,opts:l,tags:{}},x),f(y.attributes,function(t){_[t.name]=t.value}),p.innerHTML&&!/select/.test(L)&&(p.innerHTML=m(p.innerHTML,n)),this.update=function(t,e){d(c,t,x),i(),c.trigger("update",x),s(v,c,x),c.trigger("updated")},this.mount=function(){if(i(),w&&w.call(c,l),u(!0),o(p,c,v),c.parent||c.update(),c.trigger("premount"),w)for(;p.firstChild;)y.appendChild(p.firstChild);else a=p.firstChild,y.insertBefore(a,e.before||null);y.stub&&(c.root=y=h.root),c.trigger("mount")},this.unmount=function(t){var e=w?y:a,n=e.parentNode;if(n){if(h)Array.isArray(h.tags[L])?f(h.tags[L],function(t,e){t._id==c._id&&h.tags[L].splice(e,1)}):delete h.tags[L];else for(;e.firstChild;)e.removeChild(e.firstChild);t||n.removeChild(e)}c.trigger("unmount"),u(),c.off("*"),y._tag=null},r(p,this,b)}function a(e,n,i,r,o){i[e]=function(e){e=e||t.event,e.which=e.which||e.charCode||e.keyCode,e.target=e.target||e.srcElement,e.currentTarget=i,e.item=o,n.call(r,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1);var u=o?r.parent:r;u.update()}}function c(t,e,n){t&&(t.insertBefore(n,e),t.removeChild(e))}function s(t,e,n){f(t,function(t,i){var r=t.dom,o=t.attr,u=C(t.expr,e),s=t.dom.parentNode;if(null==u&&(u=""),s&&"TEXTAREA"==s.tagName&&(u=u.replace(/riot-/g,"")),t.value!==u){if(t.value=u,!o)return r.nodeValue=u;if(l(r,o),"function"==typeof u)a(o,u,r,e,n);else if("if"==o){var f=t.stub;u?f&&c(f.parentNode,f,r):(f=t.stub=f||document.createTextNode(""),c(r.parentNode,r,f))}else if(/^(show|hide)$/.test(o))"hide"==o&&(u=!u),r.style.display=u?"":"none";else if("value"==o)r.value=u;else if("riot-"==o.slice(0,5))o=o.slice(5),u?r.setAttribute(o,u):l(r,o);else{if(t.bool){if(r[o]=u,!u)return;u=o}"object"!=typeof u&&r.setAttribute(o,u)}}})}function f(t,e){for(var n,i=0,r=(t||[]).length;r>i;i++)n=t[i],null!=n&&e(n,i)===!1&&i--;return t}function l(t,e){t.removeAttribute(e)}function d(t,e,n){return e&&f(Object.keys(e),function(n){t[n]=e[n]}),n?d(t,n):t}function p(){if(t){var e=navigator.userAgent,n=e.indexOf("MSIE ");return n>0?parseInt(e.substring(n+5,e.indexOf(".",n)),10):0}}function h(t,e){var n=document.createElement("option"),i=/value=[\"'](.+?)[\"']/,r=/selected=[\"'](.+?)[\"']/,o=e.match(i),u=e.match(r);n.innerHTML=e,o&&(n.value=o[1]),u&&n.setAttribute("riot-selected",u[1]),t.appendChild(n)}function g(t){var e=t.trim().slice(1,3).toLowerCase(),n=/td|th/.test(e)?"tr":"tr"==e?"tbody":"div",i=document.createElement(n);return i.stub=!0,"op"===e&&_&&10>_?h(i,t):i.innerHTML=t,i}function v(t,e){if(t)if(e(t)===!1)v(t.nextSibling,e);else for(t=t.firstChild;t;)v(t,e),t=t.nextSibling}function m(t,e){return t.replace(/<(yield)\/?>(<\/\1>)?/gim,e||"")}function b(t,e){return e=e||document,e.querySelectorAll(t)}function y(t,e){return t.filter(function(t){return t===e})}function T(t){function e(){}return e.prototype=t,new e}function x(t){return O[t.getAttribute("riot-tag")||t.tagName.toLowerCase()]}function w(t){var e=document.createElement("style");e.innerHTML=t,document.head.appendChild(e)}function L(t,e,n){var i=O[e],r=t.innerHTML;return t.innerHTML="",i&&t&&(i=new u(i,{root:t,opts:n},r)),i&&i.mount?(i.mount(),N.push(i),i.on("unmount",function(){N.splice(N.indexOf(i),1)})):void 0}var k={version:"v2.0.15",settings:{}},_=p();k.observable=function(t){t=t||{};var e={},n=0;return t.on=function(i,r){return"function"==typeof r&&(r._id="undefined"==typeof r._id?n++:r._id,i.replace(/\S+/g,function(t,n){(e[t]=e[t]||[]).push(r),r.typed=n>0})),t},t.off=function(n,i){return"*"==n?e={}:n.replace(/\S+/g,function(t){if(i)for(var n,r=e[t],o=0;n=r&&r[o];++o)n._id==i._id&&(r.splice(o,1),o--);else e[t]=[]}),t},t.one=function(e,n){function i(){t.off(e,i),n.apply(t,arguments)}return t.on(e,i)},t.trigger=function(n){for(var i,r=[].slice.call(arguments,1),o=e[n]||[],u=0;i=o[u];++u)i.busy||(i.busy=1,i.apply(t,i.typed?[n].concat(r):r),o[u]!==i&&u--,i.busy=0);return e.all&&"all"!=n&&t.trigger.apply(t,["all",n].concat(r)),t},t},function(t,e,n){function i(){return a.href.split("#")[1]||""}function r(t){return t.split("/")}function o(t){t.type&&(t=i()),t!=u&&(c.trigger.apply(null,["H"].concat(r(t))),u=t)}if(n){var u,a=n.location,c=t.observable(),s=n,f=!1,l=t.route=function(t){t[0]?(a.hash=t,o(t)):c.on("H",t)};l.exec=function(t){t.apply(null,r(i()))},l.parser=function(t){r=t},l.stop=function(){f&&(s.removeEventListener?s.removeEventListener(e,o,!1):s.detachEvent("on"+e,o),c.off("*"),f=!1)},l.start=function(){f||(s.addEventListener?s.addEventListener(e,o,!1):s.attachEvent("on"+e,o),f=!0)},l.start()}}(k,"hashchange",t);var A=function(t,e,n){return function(i){return e=k.settings.brackets||t,n!=e&&(n=e.split(" ")),i&&i.test?e==t?i:RegExp(i.source.replace(/\{/g,n[0].replace(/(?=.)/g,"\\")).replace(/\}/g,n[1].replace(/(?=.)/g,"\\")),i.global?"g":""):n[i]}}("{ }"),C=function(){function e(t,e){return t=(t||A(0)+A(1)).replace(A(/\\{/g),"￰").replace(A(/\\}/g),"￱"),e=r(t,o(t,A(/{/),A(/}/))),new Function("d","return "+(e[0]||e[2]||e[3]?"["+e.map(function(t,e){return e%2?n(t,!0):'"'+t.replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':n(e[1])).replace(/\uFFF0/g,A(0)).replace(/\uFFF1/g,A(1))+";")}function n(t,e){return t=t.replace(/\n/g," ").replace(A(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+o(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,n){return n.replace(/[^&|=!><]+/g,i)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':i(t,e)}function i(e,n){return e=e.trim(),e?"(function(v){try{v="+(e.replace(a,function(e,n,i){return i?"(d."+i+"===undefined?"+("undefined"==typeof t?"global.":"window.")+i+":d."+i+")":e})||"x")+"}finally{return "+(n===!0?'!v&&v!==0?"":v':"v")+"}}).call(d)":""}function r(t,e){var n=[];return e.map(function(e,i){i=t.indexOf(e),n.push(t.slice(0,i),e),t=t.slice(i+e.length)}),n.concat(t)}function o(t,e,n){var i,r=0,o=[],u=new RegExp("("+e.source+")|("+n.source+")","g");return t.replace(u,function(e,n,u,a){!r&&n&&(i=a),r+=n?1:-1,r||null==u||o.push(t.slice(i,a+u.length))}),o}var u={},a=/(['"\/]).*?[^\\]\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function *\()|([a-z_$]\w*)/gi;return function(t,n){return t&&(u[t]=u[t]||e(t))(n)}}(),N=[],O={};k.tag=function(t,e,n,i){return"function"==typeof n?i=n:n&&w(n),O[t]={name:t,tmpl:e,fn:i},t},k.mount=function(t,e,n){function i(t){var i=e||t.getAttribute("riot-tag")||t.tagName.toLowerCase(),r=L(t,i,n);r&&u.push(r)}var r,o=function(t){return t=Object.keys(O).join(", "),t.split(",").map(function(e){t+=', *[riot-tag="'+e.trim()+'"]'}),t},u=[];if("object"==typeof e&&(n=e,e=0),"string"==typeof t?("*"==t&&(t=o(t)),r=b(t)):r=t,"*"==e){if(e=o(t),r.tagName)r=b(e,r);else{var a=[];f(r,function(t){a=b(e,t)}),r=a}e=0}return r.tagName?i(t):f(r,i),u},k.update=function(){return f(N,function(t){t.update()})},k.mountTo=k.mount,k.util={brackets:A,tmpl:C},"object"==typeof exports?module.exports=k:"function"==typeof define&&define.amd?define(function(){return k}):t.riot=k}("undefined"!=typeof window?window:void 0),riot.tag("tabs",'<h2>Tabs</h2> <ul> <li each="{ tab, i in tabs }" class="tabItem { is-active: parent.isActiveTab(tab.ref) }" onclick="{ parent.toggleTab }">{tab.title}</li> </ul> <div class="tabContent"> <div each="{ tab, i in tabs }" class="tabContent__item { hidden: !parent.isActiveTab(tab.ref) }">{tab.content}</div> </div>',function(t){this.tabs=[{title:"Tab 1",ref:"tab1",content:"(1) Lorem ipsum dolor"},{title:"Tab 2",ref:"tab2",content:"(2) Lorem ipsum dolor"},{title:"Tab 3",ref:"tab3",content:"(3) Lorem ipsum dolor"}],this.activeTab="tab1",this.isActiveTab=function(t){return this.activeTab===t}.bind(this),this.toggleTab=function(t){return this.activeTab=t.item.tab.ref,!0}.bind(this)}),riot.tag("todo",'<h3>{ opts.title }</h3> <ul> <li each="{ items }" class="{ hidden: hidden }"> <label class="{ completed: done }"> <input type="checkbox" __checked="{ done }" onclick="{ parent.toggle }"> { title } </label> </li> </ul> <form onsubmit="{ add }"> <input type="checkbox" __checked="{ checked }" onclick="{ check }"><input name="input" onkeyup="{ edit }"> <button __disabled="{ !text }">Add #{ items.length + 1 }</button> </form>',function(t){this.disabled=!0,this.items=t.items,this.checked=!1,this.edit=function(t){this.text=t.target.value}.bind(this),this.add=function(t){this.text&&(this.items.push({title:this.text,done:this.checked}),this.text=this.input.value="")}.bind(this),this.check=function(t){return this.checked=!this.checked,!0}.bind(this),this.toggle=function(t){var e=t.item;return e.done=!e.done,!0}.bind(this)});
